## 自动生成changelog（生成release，为版本发布使用）
master分支合并新代码
```
git checkout dev
git rebase main
git checkout main
git merge dev
```
执行指令
```
standard-version -r 0.4.11 --skip.tag --skip.commit
```
自动生成Change log，生成的文档包括3个部分：
- New features
- Bug fixes
- Breaking changes

每个部分都会罗列相关的 commit ，并且有指向这些 commit 的链接。生成的文档允许手动修改，所以发布前，你还可以添加其他内容。


## 版本发布
执行上条release指令后才能执行发布流程：
执行指令
```
npm install
npm run build

// 提交产物
git add .
git commit -m "chore(release): 0.4.11"

// 添加tag 
git tag -a v0.4.11
git push origin v0.4.11
git push --follow-tags origin main

// 用main分支覆盖dev
git checkout dev
git reset --hard main
git push origin dev:dev --force
```

## 发布[npmjs](https://www.npmjs.com/)
```
npm config set registry  https://registry.npmjs.org/
npm login
npm publish
```

## 发布vscodePlugin
更新cherry的代码到plugin里（目前这一步还是手动的）
```
copy -Rf ./dist ./vscodePlugin/web-resources/dist
```

安装vsce（如已安装，则跳过该步骤）
```
npm install -g @vscode/vsce
// 登录
vsce login cherryMarkdownPublisher
// 根据提示输入token
```
token在[这里](https://dev.azure.com/cherry-markdown/_usersSettings/tokens)获取

执行发布
```
cd ./vscodePlugin
修改package.json里的version：`"version": "0.0.14",`
// 执行发布命令
vsce publish
```