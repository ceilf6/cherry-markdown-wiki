cherryæœ‰**äº”ç§**å·¥å…·æ ä½ç½®ï¼Œå¦‚ä¸‹ï¼š
![cherryå·¥å…·æ ](https://github.com/Tencent/cherry-markdown/assets/998441/fecbc23c-5e85-4072-9dc5-8c71faa9d700)
åŒæ—¶ï¼Œcherryè¿˜é»˜è®¤æä¾›äº†30+å·¥å…·æ æŒ‰é’®ï¼ˆéƒ½å®šä¹‰åœ¨`/src/toolbars/hooks/`ç›®å½•ä¸‹ï¼‰ï¼Œå¹¶ä¸”è¿˜æ”¯æŒè‡ªå®šä¹‰å·¥å…·æ æŒ‰é’®ã€‚

**æœ€ç®€å•çš„é…ç½®å¦‚ä¸‹ï¼š**
```javascript
new Cherry({
    id: 'markdown-container', 
    value: '## hello world', 
    fileUpload: myFileUpload,
    toolbars: {
        // å®šä¹‰é¡¶éƒ¨å·¥å…·æ 
        toolbar: ['bold','italic','strikethrough','|','color','header','ruby','|','list','panel','detail'],
        // å®šä¹‰ä¾§è¾¹æ ï¼Œé»˜è®¤ä¸ºç©º
        sidebar: [],
        // å®šä¹‰é¡¶éƒ¨å³ä¾§å·¥å…·æ ï¼Œé»˜è®¤ä¸ºç©º
        toolbarRight: [],
        // å®šä¹‰é€‰ä¸­æ–‡å­—æ—¶å¼¹å‡ºçš„â€œæ‚¬æµ®å·¥å…·æ â€ï¼Œé»˜è®¤ä¸º ['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'quote', '|', 'size', 'color']
        bubble: false,
        // å®šä¹‰å…‰æ ‡å‡ºç°åœ¨è¡Œé¦–ä½ç½®æ—¶å‡ºç°çš„â€œæç¤ºå·¥å…·æ â€ï¼Œé»˜è®¤ä¸º ['h1', 'h2', 'h3', '|', 'checklist', 'quote', 'table', 'code']
        float: false,
    },
});
```
**é…ç½®çš„æ•ˆæœå¦‚ä¸‹å›¾ï¼š**
![image](https://github.com/Tencent/cherry-markdown/assets/998441/112949b0-19ba-4b0c-925f-56daa2e7b5b2)

### å·¥å…·æ æŒ‰é’®list
**cherryè‡ªå¸¦çš„å·¥å…·æ æŒ‰é’®æœ‰ä»¥ä¸‹è¿™äº›ï¼š**

- è¾…åŠ©ç±»
    - |: åˆ†éš”ç¬¦ï¼Œå•çº¯çš„åˆ†å‰²å·¥å…·æ ï¼Œæ— ä»»ä½•ä½œç”¨
    - insert: æ’å…¥ï¼Œå•çº¯çš„å ä½ï¼Œç‚¹å‡»æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œç”¨æ¥é…ç½®äºŒçº§èœå•
- å­—ä½“æ ·å¼ç±»
    - bold: åŠ ç²—
    - italic: æ–œä½“
    - underline: ä¸‹åˆ’çº¿
    - strikethrough: åˆ é™¤çº¿
    - sub: ä¸‹æ ‡
    - sup: ä¸Šæ ‡
    - ruby: å®ç°ç±»ä¼¼ç»™æ–‡å­—åŠ æ‹¼éŸ³çš„æ•ˆæœï¼ˆå½“ç„¶å¦‚ä½•æŠŠæ–‡å­—è½¬æˆæ‹¼éŸ³éœ€è¦ä¸šåŠ¡æ–¹è‡ªè¡Œå®ç°ï¼Œä¹Ÿå¯å‚è€ƒ[åœ¨çº¿demo](https://tencent.github.io/cherry-markdown/examples/index.html)ç”¨çš„æ–‡å­—è½¬æ‹¼éŸ³ç»„ä»¶ï¼‰
    - size: æ–‡å­—å°ºå¯¸ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯é€‰ å°ã€ä¸­ã€å¤§ã€ç‰¹å¤§
    - color: æ–‡å­—é¢œè‰²ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯é€‰ æ–‡å­—é¢œè‰²ã€æ–‡å­—èƒŒæ™¯è‰²
- æ®µè½å±æ€§ç±»
    - quote: å¼•ç”¨
    - detail: æ‰‹é£ç´ï¼Œå³å¯ä»¥å±•å¼€æ”¶èµ·å†…å®¹
    - h1: ä¸€çº§æ ‡é¢˜
    - h2: äºŒçº§æ ‡é¢˜
    - h3: ä¸‰çº§æ ‡é¢˜
    - header: æ ‡é¢˜èœå•ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯ä»¥é€‰ 1~5çº§æ ‡é¢˜
    - ul: æ— åºåˆ—è¡¨
    - ol: æœ‰åºåˆ—è¡¨
    - checklist: ä»»åŠ¡æ¸…å•
    - list: åˆ—è¡¨èœå•ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯é€‰ æœ‰åºåˆ—è¡¨ã€æ— åºåˆ—è¡¨ã€ä»»åŠ¡æ¸…å•
    - justify: å¯¹é½æ–¹å¼ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯ä»¥é€‰ å·¦å¯¹é½ã€å±…ä¸­ã€å³å¯¹é½
    - panel: ä¿¡æ¯é¢æ¿ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯ä»¥é€‰ tipsã€infoã€warningã€dangerã€success
- æ’å…¥ç±»
    - image: æ’å…¥å›¾ç‰‡
    - audio: æ’å…¥éŸ³é¢‘
    - video: æ’å…¥è§†é¢‘
    - pdf: æ’å…¥pdf
    - word: æ’å…¥wordæ–‡æ¡£
    - file: æ’å…¥æ™®é€šæ–‡ä»¶
    - link: æ’å…¥é“¾æ¥
    - hr: æ’å…¥æ°´å¹³åˆ†å‰²çº¿
    - br: æ’å…¥æ–°è¡Œ
    - code: ä»£ç å—
    - formula: æ’å…¥æ•°å­¦å…¬å¼
    - toc: æ’å…¥ç›®å½•
    - table: æ’å…¥è¡¨æ ¼
    - drawIo: æ’å…¥draw.ioç”»å›¾ï¼Œç‚¹å‡»åä¼šå‡ºç°draw.ioç”»å›¾é¢æ¿
    - graph: æ’å…¥ç”»å›¾ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯é€‰ æµç¨‹å›¾ã€æ—¶åºå›¾ã€çŠ¶æ€å›¾ã€ç±»å›¾ã€é¥¼å›¾ã€ç”˜ç‰¹å›¾
- åŠŸèƒ½ç±»
    - undo: å›æ’¤æ“ä½œ
    - redo: æ¢å¤æœ€è¿‘å›æ’¤çš„æ“ä½œ
    - theme: åˆ‡æ¢ä¸»é¢˜ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼Œä¸»é¢˜å¯é…ç½®ä¹Ÿå¯ç”±ä¸šåŠ¡æ–¹è‡ªè¡Œä¸°å¯Œ
    - codeTheme: åˆ‡æ¢ä»£ç å—çš„ä¸»é¢˜ï¼Œè‡ªå¸¦äºŒçº§èœå•
    - mobilePreview: æŠŠé¢„è§ˆåŒºåŸŸå˜æˆh5æ¨¡å¼
    - togglePreview: æ‰“å¼€/å…³é—­é¢„è§ˆåŒº(ç”¨äºå·¦å³åˆ†æ æ¨¡å¼ï¼Œå³å·¦è¾¹æ˜¯ç¼–è¾‘åŒºåŸŸï¼Œå³è¾¹æ˜¯é¢„è§ˆåŒºåŸŸ)
    - switchModel: åˆ‡æ¢ç¼–è¾‘/é¢„è§ˆæ¨¡å¼(ç”¨äºå•æ ç¼–è¾‘æ¨¡å¼ï¼Œå³ç‚¹ä¸€ä¸‹æ˜¯ç¼–è¾‘æ¨¡å¼ï¼Œå†ç‚¹ä¸€ä¸‹æ˜¯é¢„è§ˆæ¨¡å¼ï¼Œç±»ä¼¼githubçš„äº¤äº’ä½“éªŒ)
    - copy: å¤åˆ¶é¢„è§ˆåŒºåŸŸçš„htmlå†…å®¹åˆ°å‰ªè´´æ¿
    - export: å¯¼å‡ºï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯é€‰ å¯¼å‡ºPDFã€å¯¼å‡ºé•¿å›¾ã€å¯¼å‡ºmarkdownã€å¯¼å‡ºhtml
    - fullScreen: å…¨å±/å–æ¶ˆå…¨å±
    - settings: è®¾ç½®ï¼Œè‡ªå¸¦äºŒçº§èœå•ï¼ŒäºŒçº§èœå•é‡Œå¯é€‰ å¸¸è§„æ¢è¡Œ/ç»å…¸æ¢è¡Œåˆ‡æ¢ã€å…³é—­/æ‰“å¼€é¢„è§ˆã€éšè—å·¥å…·æ  ï¼ˆä¸æ¨èç”¨äº†ï¼Œå®Œå…¨å¯ä»¥è‡ªè¡Œå®ç°ï¼‰

### è‡ªç”±ç»„è£…å·¥å…·æ 

æˆ‘ä»¬å¯ä»¥é…ç½®å°†å¤šä¸ªå·¥å…·æ æŒ‰é’®å˜æˆæŸä¸ªå·¥å…·æ çš„å­æŒ‰é’®ï¼Œä»è€Œè¾¾åˆ°èŠ‚çº¦ç©ºé—´ã€æŒ‰é’®åˆ†ç±»ç­‰ç›®çš„ã€‚

åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå­—æ®µæ ·å¼ç±»æŒ‰é’®æ”¾è¿›â€œ**æ‚¬æµ®å·¥å…·æ **â€ä¸­ï¼ŒæŠŠæ®µè½ç±»å’Œæ’å…¥ç±»æŒ‰é’®æ”¾è¿›â€œ**æç¤ºå·¥å…·æ **â€ä¸­ï¼ŒæŠŠåŠŸèƒ½ç±»æŒ‰é’®æ”¾è¿›**ä¾§è¾¹æ **æˆ–**é¡¶éƒ¨å³ä¾§å·¥å…·æ **ä¸­

> ä½†éœ€è¦æ³¨æ„ï¼Œè‡ªå¸¦äºŒçº§èœå•çš„æŒ‰é’®**æ— æ³•**è¢«æ”¾è¿›å…¶ä»–æŒ‰é’®é‡Œ

ä»£ç å¦‚ä¸‹ï¼š
```javascript
new Cherry({
    id: 'markdown-container', 
    value: '## hello world', 
    fileUpload: myFileUpload,
    toolbars: {
        // å®šä¹‰é¡¶éƒ¨å·¥å…·æ 
        toolbar: [
            'undo', 'redo', '|',
            // æŠŠå­—ä½“æ ·å¼ç±»æŒ‰é’®éƒ½æ”¾åœ¨åŠ ç²—æŒ‰é’®ä¸‹é¢
            {bold:['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'ruby']},
            'color', 'size', '|', 'header', 'list', 'panel', '|',
            // æŠŠæ’å…¥ç±»æŒ‰é’®éƒ½æ”¾åœ¨æ’å…¥æŒ‰é’®ä¸‹é¢
            {insert: ['image', 'audio', 'video', 'link', 'hr', 'br', 'code', 'formula', 'toc', 'table', 'drawIo']},
            'graph'
        ],
        // å®šä¹‰ä¾§è¾¹æ ï¼Œé»˜è®¤ä¸ºç©º
        sidebar: ['theme', 'mobilePreview', 'copy'],
        // å®šä¹‰é¡¶éƒ¨å³ä¾§å·¥å…·æ ï¼Œé»˜è®¤ä¸ºç©º
        toolbarRight: ['fullScreen', 'export'],
        // å®šä¹‰é€‰ä¸­æ–‡å­—æ—¶å¼¹å‡ºçš„â€œæ‚¬æµ®å·¥å…·æ â€ï¼Œé»˜è®¤ä¸º ['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'quote', '|', 'size', 'color']
        bubble: ['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'ruby', '|', 'color','size',],
        // å®šä¹‰å…‰æ ‡å‡ºç°åœ¨è¡Œé¦–ä½ç½®æ—¶å‡ºç°çš„â€œæç¤ºå·¥å…·æ â€ï¼Œé»˜è®¤ä¸º ['h1', 'h2', 'h3', '|', 'checklist', 'quote', 'table', 'code']
        float: ['table', 'code', 'graph'],
    },
});
```

**é…ç½®çš„æ•ˆæœå¦‚ä¸‹å›¾ï¼š**
![å­—ä½“æ ·å¼](https://github.com/Tencent/cherry-markdown/assets/998441/73ffbc44-c586-4ca7-9acf-7c16a42b5876)


### è‡ªå®šä¹‰å·¥å…·æ æŒ‰é’®

è‡ªå®šä¹‰å·¥å…·æ æŒ‰é’®**ä¸‰æ­¥æå®š**ï¼š
1. åˆ›å»ºæŒ‰é’®å¯¹è±¡
```javascript
var customMenu = Cherry.createMenuHook('è‡ªå®šä¹‰',  {
    iconName: '', // å£°æ˜æŒ‰é’®çš„å›¾æ ‡ï¼Œç©ºè¡¨ç¤ºä¸æ˜¾ç¤ºå›¾æ ‡ç›´æ¥æ˜¾ç¤ºæ–‡å­—
});
```
2. åœ¨cherryä¸­å£°æ˜è¯¥å¯¹è±¡
```
toolbars: {
    ...
    customMenu: {
        myMenu: customMenu,
    },
}
```
3. å°†å…¶é…ç½®åˆ°cherryçš„å·¥å…·æ ä¸­
```
toolbars: {
    // å®šä¹‰é¡¶éƒ¨å·¥å…·æ 
    toolbar: ['bold', 'myMenu'],
    ...
}
```


æ¥ä¸‹æ¥é‡ç‚¹ä»‹ç»ç¬¬ä¸€æ­¥ï¼Œ**å¦‚ä½•åˆ›å»ºæŒ‰é’®å¯¹è±¡**ã€‚

æˆ‘ä»¬å¯é€šè¿‡`cherry.createMenuHook`åˆ›å»º**ä¸‰ç±»**æŒ‰é’®å¯¹è±¡

**ç¬¬ä¸€ç±»**æ™®é€šæŒ‰é’®ï¼Œå¯å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»æ—¶åšç›¸åº”çš„æ“ä½œï¼ˆæ¯”å¦‚å¾€ç¼–è¾‘åŒºæ’å…¥å†…å®¹ï¼Œæˆ–è€…ä¿®æ”¹é¢„è§ˆåŒºå†…å®¹ç­‰ï¼‰ï¼Œä»£ç å¦‚ä¸‹ï¼š
```javascript
var customMenuA = Cherry.createMenuHook('åŠ ç²—æ–œä½“',  {
    iconName: 'font', // å£°æ˜ä½¿ç”¨çš„å›¾æ ‡ï¼Œå¯é€‰çš„å›¾æ ‡å¯ä»¥åœ¨ https://github.com/Tencent/cherry-markdown/tree/main/src/sass/icons é‡ŒæŸ¥çœ‹
    onClick: function(selection) {
        return `***${selection}***`;
    }
});
```


**ç¬¬äºŒç±»**ç©ºå£³æŒ‰é’®ï¼Œç‚¹å‡»æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œæœ€ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥å­˜æ”¾å­æŒ‰é’®ï¼Œä»£ç å¦‚ä¸‹ï¼š
```javascript
var customMenuB = Cherry.createMenuHook('å®éªŒå®¤',  {
    iconName: '',
});
```

**ç¬¬ä¸‰ç±»**è‡ªå¸¦äºŒçº§èœå•çš„æŒ‰é’®ï¼Œç‚¹å‡»åå‡ºç°äºŒçº§èœå•ï¼Œç‚¹å‡»äºŒçº§èœå•æ‰§è¡Œç›¸å…³æ“ä½œï¼Œä»£ç å¦‚ä¸‹ï¼š
```javascript
var customMenuC = Cherry.createMenuHook('å¸®åŠ©ä¸­å¿ƒ',  {
    iconName: 'question',
    subMenuConfig: [
        { noIcon: true, name: 'å¿«æ·é”®', onclick: (event)=>{return cherry.insert('å¿«æ·é”®çœ‹è¿™é‡Œï¼šhttps://codemirror.net/5/demo/sublime.html');} },
        { noIcon: true, name: 'è”ç³»æˆ‘ä»¬', onclick: (event)=>{return cherry.insert('æˆ‘ä»¬åœ¨è¿™é‡Œï¼šhttps://github.com/Tencent/cherry-markdown');} },
        { noIcon: true, name: 'æ›´æ–°æ—¥å¿—', onclick: (event)=>{return cherry.insert('æˆ‘ä»¬åœ¨è¿™é‡Œï¼šhttps://github.com/Tencent/cherry-markdown/releases');} },
    ]
});
```

åœ¨äº†è§£ä¸‰ç±»æŒ‰é’®åï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»ä¸‹createMenuHookéƒ½æä¾›äº†å“ªäº›**å·¥å…·æ–¹æ³•**
1. è·å–é€‰ä¸­åŒºåŸŸçš„å†…å®¹
```javascript
/**
 * è·å–ç”¨æˆ·é€‰ä¸­çš„æ–‡æœ¬å†…å®¹ï¼Œå¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œåˆ™è¿”å›å…‰æ ‡æ‰€åœ¨çš„ä½ç½®çš„å†…å®¹
 * @param {string} selection å½“å‰é€‰ä¸­çš„æ–‡æœ¬å†…å®¹
 * @param {string} type  'line': å½“æ²¡æœ‰é€‰æ‹©æ–‡æœ¬æ—¶ï¼Œè·å–å…‰æ ‡æ‰€åœ¨è¡Œçš„å†…å®¹ï¼› 'word': å½“æ²¡æœ‰é€‰æ‹©æ–‡æœ¬æ—¶ï¼Œè·å–å…‰æ ‡æ‰€åœ¨å•è¯çš„å†…å®¹
 * @param {boolean} focus trueï¼›å¼ºè¡Œé€‰ä¸­å…‰æ ‡å¤„çš„å†…å®¹ï¼Œå¦åˆ™åªè·å–é€‰ä¸­çš„å†…å®¹
 * @returns {string}
 */
getSelection(selection, type = 'word', focus = false)
```
2. è®©å…‰æ ‡é€‰æ‹©æ›´å¤šçš„åŒºåŸŸ
```javascript
/**
 * åŸºäºå½“å‰å·²é€‰æ‹©åŒºåŸŸï¼Œè·å–æ›´å¤šçš„é€‰æ‹©åŒº
 * @param {string} [appendBefore] é€‰æ‹©åŒºå‰é¢è¿½åŠ çš„å†…å®¹
 * @param {string} [appendAfter] é€‰æ‹©åŒºåé¢è¿½åŠ çš„å†…å®¹
 * @param {function} [cb] æ‰©å¤§é€‰åŒºåçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœcbè¿”å›falseï¼Œåˆ™æ¢å¤åŸæ¥çš„é€‰å–
 */
getMoreSelection(appendBefore, appendAfter, cb)
```
3. è®©å…‰æ ‡é€‰æ‹©æ›´å°‘çš„åŒºåŸŸ
```javascript
/**
 * é€‰ä¸­é™¤äº†å‰åè¯­æ³•åçš„å†…å®¹
 * @param {String} lessBefore
 * @param {String} lessAfter
 */
setLessSelection(lessBefore, lessAfter)
```
4. æ³¨å†Œç‚¹å‡»äº‹ä»¶æ¸²æŸ“åçš„å›è°ƒå‡½æ•°
```javascript
/**
* æ³¨å†Œç‚¹å‡»äº‹ä»¶æ¸²æŸ“åçš„å›è°ƒå‡½æ•°
* @param {function} cb
*/
registerAfterClickCb(cb)
```
5. å…¶ä»–å±æ€§
- `isSelections` true: æœ‰å¤šä¸ªé€‰åŒº/å…‰æ ‡ï¼›falseï¼šåªæœ‰ä¸€ä¸ª
- `$cherry` å®ä¾‹åŒ–çš„cherryå¯¹è±¡
- `editor` ç¼–è¾‘åŒºå¯¹è±¡ï¼Œä¹Ÿå¯é€šè¿‡`this.$cherry.editor`è·å¾—
- `editor.editor` ç¼–è¾‘åŒºçš„codemirrorå¯¹è±¡ï¼Œå¯è°ƒç”¨codemirrorçš„api
- `updateMarkdown` trueï¼šæœ¬æŒ‰é’®ç‚¹å‡»åä¼šå˜æ›´ç¼–è¾‘åŒºå†…å®¹  falseï¼šæœ¬æŒ‰é’®ç‚¹å‡»åä¸ä¼šæ›´æ–°ç¼–è¾‘åŒºå†…å®¹ï¼ˆå¦‚å¤åˆ¶ã€å¯¼å‡ºç­‰æŒ‰é’®ï¼‰
- `noIcon` true: æ²¡æœ‰å›¾æ ‡ï¼Œç›´æ¥æ˜¾ç¤ºæŒ‰é’®å   falseï¼šå°è¯•æ˜¾ç¤ºæŒ‰é’®å›¾æ ‡


é—®é¢˜æ¥äº†ï¼Œè¿™äº›æ–¹æ³•æœ‰**ä»€ä¹ˆç”¨**ï¼Ÿ

ä¸æ€¥ï¼Œæˆ‘ä»¬å…ˆå›çœ‹ä¸‹**ç¬¬ä¸€ç±»**æ™®é€šæŒ‰é’®çš„ä¾‹å­ï¼š
```javascript
var customMenuA = Cherry.createMenuHook('åŠ ç²—æ–œä½“',  {
    iconName: 'font', // å£°æ˜ä½¿ç”¨çš„å›¾æ ‡ï¼Œå¯é€‰çš„å›¾æ ‡å¯ä»¥åœ¨ https://github.com/Tencent/cherry-markdown/tree/main/src/sass/icons é‡ŒæŸ¥çœ‹
    onClick: function(selection) {
        return `***${selection}***`;
    }
});
```
è¿™ä¸ªä¾‹å­çš„å®ç°æœ‰**ä¸‰ä¸ªä½“éªŒé—®é¢˜**ï¼š
1. æ°¸è¿œåœ¨è¿½åŠ `***`ï¼Œç”¨æˆ·æ¯ç‚¹å‡»ä¸€æ¬¡å°±ä¼šè¿½åŠ ä¸€å±‚`***`ï¼Œè¿™æ˜¯éå¸¸ä¸èˆ’æœçš„
2. ç‚¹å‡»æŒ‰é’®åï¼Œå…‰æ ‡ä¼šé€‰ä¸­åŒ…å«`***`çš„å†…å®¹ï¼Œè¿™å¯¼è‡´ç”¨æˆ·éœ€è¦å†æ‰‹åŠ¨è°ƒæ•´å…‰æ ‡é€‰åŒºæ‰èƒ½ä¿®æ”¹å†…å®¹
3. å¦‚æœç”¨æˆ·çš„å†…å®¹æ˜¯"hello world"ï¼Œç”¨æˆ·å¦‚æœæƒ³åŠ ç²—"world"è¿™ä¸ªå•è¯å°±ä¸€å®šè¦å…ˆé€‰ä¸­è¿™ä¸ªå•è¯æ‰èƒ½æ“ä½œï¼Œå¤šå°‘æœ‰ç‚¹éº»çƒ¦

ä¸ºè§£å†³ä»¥ä¸Šä½“éªŒé—®é¢˜ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ä¾‹å­åšäº†ä¿®æ”¹ï¼Œä¿®æ”¹åçš„å®Œæ•´ä¾‹å­å¦‚ä¸‹ï¼š

```javascript
/**
 * è‡ªå®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰èœå•æŒ‰é’®
 * ç‚¹ç¬¬ä¸€æ¬¡æ—¶ï¼ŒæŠŠé€‰ä¸­çš„æ–‡å­—å˜æˆåŒæ—¶åŠ ç²—å’Œæ–œä½“
 * ä¿æŒå…‰æ ‡é€‰åŒºä¸å˜ï¼Œç‚¹ç¬¬äºŒæ¬¡æ—¶ï¼ŒæŠŠåŠ ç²—æ–œä½“çš„æ–‡å­—å˜æˆæ™®é€šæ–‡æœ¬
 */
var customMenuA = Cherry.createMenuHook('åŠ ç²—æ–œä½“',  {
    iconName: 'font',
    onClick: function(selection) {
        // è·å–ç”¨æˆ·é€‰ä¸­çš„æ–‡å­—ï¼Œè°ƒç”¨getSelectionæ–¹æ³•åï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰é€‰ä¸­ä»»ä½•æ–‡å­—ï¼Œä¼šå°è¯•è·å–å…‰æ ‡æ‰€åœ¨ä½ç½®çš„å•è¯æˆ–å¥å­
        let $selection = this.getSelection(selection) || 'åŒæ—¶åŠ ç²—æ–œä½“';
        
        // å¦‚æœæ˜¯å•é€‰ï¼Œå¹¶ä¸”é€‰ä¸­å†…å®¹çš„å¼€å§‹ç»“æŸå†…æ²¡æœ‰åŠ ç²—æ–œä½“è¯­æ³•ï¼Œåˆ™å°è¯•æ‰©å¤§é€‰ä¸­èŒƒå›´
        if (!this.isSelections && !/^\s*(\*\*\*)[\s\S]+(\1)/.test($selection)) {
            this.getMoreSelection('***', '***', () => {
                // è°ƒç”¨codemirrorçš„apiè·å–å½“å‰é€‰ä¸­çš„æ–‡æœ¬
                const newSelection = this.editor.editor.getSelection();
                // åˆ¤æ–­æ˜¯å¦å·²ç»æ˜¯åŠ ç²—æ–œä½“è¯­æ³•äº†
                const isBoldItalic = /^\s*(\*\*\*)[\s\S]+(\1)/.test(newSelection);
                if (isBoldItalic) {
                    $selection = newSelection;
                }
                return isBoldItalic;
            });
        }

        // å¦‚æœé€‰ä¸­çš„æ–‡æœ¬ä¸­å·²ç»æœ‰åŠ ç²—è¯­æ³•äº†ï¼Œåˆ™å»æ‰åŠ ç²—è¯­æ³•
        if (/^\s*(\*\*\*)[\s\S]+(\1)/.test($selection)) {
            // return $selection.replace(/(^)(\s*)(\*\*\*)([^\n]+)(\3)(\s*)($)/gm, '$1$4$7');  // è¿™ä¸ªæ­£åˆ™ä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒå¤šè¡Œï¼Œå¯ä»¥å¿½ç•¥
            return $selection.replace(/^\*\*\*/, '').replace(/\*\*\*$/, '');
        }

        /**
         * æ³¨å†Œç¼©å°é€‰åŒºçš„è§„åˆ™
         *    æ³¨å†Œåï¼Œæ’å…¥â€œ***TEXT***â€ï¼Œé€‰ä¸­çŠ¶æ€ä¼šå˜æˆâ€œ***ã€TEXTã€‘***â€
         *    å¦‚æœä¸æ³¨å†Œï¼Œæ’å…¥åé€‰ä¸­æ•ˆæœä¸ºï¼šâ€œã€***TEXT***ã€‘â€
         */
        this.registerAfterClickCb(() => {
            this.setLessSelection('***', '***');
        });
        // å¢åŠ åŠ ç²—æ–œä½“è¯­æ³•
        // return $selection.replace(/(^)([^\n]+)($)/gm, '$1***$2***$3');  // è¿™ä¸ªæ­£åˆ™ä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒå¤šè¡Œï¼Œå¯ä»¥å¿½ç•¥
        return `***${$selection}***`;
    }
});

/**
 * è‡ªå®šä¹‰ä¸€ä¸ªç©ºå£³è‡ªå®šä¹‰æŒ‰é’®
 */
var customMenuB = Cherry.createMenuHook('å®éªŒå®¤',  {
    iconName: '',
});

/**
 * è‡ªå®šä¹‰ä¸€ä¸ªå¸¦äºŒçº§èœå•çš„è‡ªå®šä¹‰æŒ‰é’®
 */
var customMenuC = Cherry.createMenuHook('å¸®åŠ©ä¸­å¿ƒ',  {
    iconName: 'question',
    subMenuConfig: [
        { noIcon: true, name: 'å¿«æ·é”®', onclick: (event)=>{return cherry.insert('å¿«æ·é”®çœ‹è¿™é‡Œï¼šhttps://codemirror.net/5/demo/sublime.html');} },
        { noIcon: true, name: 'è”ç³»æˆ‘ä»¬', onclick: (event)=>{return cherry.insert('æˆ‘ä»¬åœ¨è¿™é‡Œï¼šhttps://github.com/Tencent/cherry-markdown');} },
        { noIcon: true, name: 'æ›´æ–°æ—¥å¿—', onclick: (event)=>{return cherry.insert('æˆ‘ä»¬åœ¨è¿™é‡Œï¼šhttps://github.com/Tencent/cherry-markdown/releases');} },
    ]
});

new Cherry({
    id: 'markdown-container', 
    value: '## hello world', 
    fileUpload: myFileUpload,
    toolbars: {
        // å®šä¹‰é¡¶éƒ¨å·¥å…·æ 
        toolbar: [
            'undo', 'redo', '|',
            // æŠŠå­—ä½“æ ·å¼ç±»æŒ‰é’®éƒ½æ”¾åœ¨åŠ ç²—æŒ‰é’®ä¸‹é¢
            {bold:['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'ruby', 'bold&italic']},
            'color', 'size', '|', 'header', 'list', 'panel', '|',
            // æŠŠæ’å…¥ç±»æŒ‰é’®éƒ½æ”¾åœ¨æ’å…¥æŒ‰é’®ä¸‹é¢
            {insert: ['image', 'audio', 'video', 'link', 'hr', 'br', 'code', 'formula', 'toc', 'table', 'drawIo']},
            'graph', '|',
            // æŠŠè‡ªå®šä¹‰æŒ‰é’®æ”¾è¿›æ¥
            {lab: ['drawIo', 'ruby', 'bold&italic']}, 'help'
        ],
        // å®šä¹‰ä¾§è¾¹æ ï¼Œé»˜è®¤ä¸ºç©º
        sidebar: ['theme', 'mobilePreview', 'copy'],
        // å®šä¹‰é¡¶éƒ¨å³ä¾§å·¥å…·æ ï¼Œé»˜è®¤ä¸ºç©º
        toolbarRight: ['fullScreen', 'export'],
        // å®šä¹‰é€‰ä¸­æ–‡å­—æ—¶å¼¹å‡ºçš„â€œæ‚¬æµ®å·¥å…·æ â€ï¼Œé»˜è®¤ä¸º ['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'quote', '|', 'size', 'color']
        bubble: ['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'ruby', '|', 'color','size',],
        // å®šä¹‰å…‰æ ‡å‡ºç°åœ¨è¡Œé¦–ä½ç½®æ—¶å‡ºç°çš„â€œæç¤ºå·¥å…·æ â€ï¼Œé»˜è®¤ä¸º ['h1', 'h2', 'h3', '|', 'checklist', 'quote', 'table', 'code']
        float: ['table', 'code', 'graph'],
        // å£°æ˜è‡ªå®šä¹‰æŒ‰é’®
        customMenu: {
            'bold&italic': customMenuA,
            lab: customMenuB,
            help: customMenuC,
        },
    },
});
```

**æœ€ç»ˆæ•ˆæœå¦‚ä¸‹å›¾ï¼š**
ï¼ˆå¿½ç•¥å›¾ç‰‡ä¸­çš„åŠ æ‹¼éŸ³åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½éœ€è¦é¢å¤–å¼•å…¥ç¬¬ä¸‰æ–¹çš„ç»„ä»¶æ‰èƒ½å®ç°ï¼‰
![è‡ªå®šä¹‰å·¥å…·æ ](https://github.com/Tencent/cherry-markdown/assets/998441/3eeb489a-1396-4bd4-9975-5885a2bacdc0)


### è‡ªå®šä¹‰å·¥å…·æ æŒ‰é’® Icon

ç°åœ¨æ”¯æŒä¸‰ç§æ–¹å¼è‡ªå®šä¹‰iconå›¾æ ‡ï¼Œä»¥åŠæ”¯æŒAPIçš„å½¢å¼åŠ¨æ€æ›´æ–°å›¾æ ‡ï¼ˆä¸€æ¬¡æ€§çš„ï¼‰

#### è‡ªå®šä¹‰ å¤–éƒ¨ iconFont å›¾æ ‡

æ­¤æ–¹å¼éœ€è¦å‡†å¤‡å¥½å­—ä½“å›¾æ ‡æ–‡ä»¶ï¼Œåœ¨ `src/sass/ch-icon.scss` æ–‡ä»¶ä¸­å¼•ç”¨ï¼Œå‚ç…§ `.ch-icon-*:before { content: "*" }`(`*`ä»£è¡¨å…·ä½“çš„iconå†…å®¹) çš„æ–¹å¼é…ç½®å³å¯

#### è‡ªå®šä¹‰ svg / img å›¾æ ‡
é…ç½®é¡¹çš„ç±»å‹å®šä¹‰åœ¨ `types/menus.d.ts` ä¸­ï¼Œå…·ä½“æ¥è¯´å½¢å¦‚ğŸ‘‡

![Type Define](https://github.com/Tencent/cherry-markdown/assets/34962267/84ccba7f-f506-4f31-8ddf-ca6cf6cbf3a7)
å…¶ä¸­ `name` å°±æ˜¯åŸæ¥çš„toolbaråç§°ï¼Œä¸èƒ½è‡ªå®šä¹‰ï¼Œé™¤éä½¿ç”¨è‡ªå®šä¹‰èœå•
`type` æ”¯æŒ `svg` å’Œ `img`
`content` å½“ `type` ä¸º `svg` æ—¶ï¼Œå¡«svgæ–‡ä»¶å†…å®¹ï¼Œåä¹‹å¡«å›¾ç‰‡çš„ urlæˆ–base64
å‰©ä¸‹çš„å°±æ˜¯æ ·å¼é…ç½®ï¼Œå…¨å‡­ä¸ªäººå–œå¥½äº†

#### è‡ªå®šä¹‰å†…éƒ¨ iconFont å›¾æ ‡

```js
{
  name: 'italic',
  icon: 'bold',
}
```
è¿™æ ·å°±å¯ä»¥è®©ä¸‹åˆ’çº¿ä½¿ç”¨åŠ ç²—çš„å›¾æ ‡äº†ï¼Œå†…éƒ¨å›¾æ ‡åœ¨ [issue #589](https://github.com/Tencent/cherry-markdown/issues/589) é‡Œè¯´æ˜äº†

å¦å¤–ï¼Œæ¯ä¸ªæŒ‰é’®ç°åœ¨æ”¯æŒé€šè¿‡APIçš„æ–¹å¼æ›´æ–°iconäº†ï¼Œå¦‚ä¸‹
![API](https://github.com/Tencent/cherry-markdown/assets/34962267/6efe9f3e-99c8-4cc5-9ca9-4ba3cf1662d8)

`cherry.toolbar.menus.hooks['header'].updateMenuIcon('bold')`

`updateMenuIcon` çš„å‚æ•°ä¸é…ç½®é¡¹ä¸€è‡´ï¼Œå¯å‚ç…§ è‡ªå®šä¹‰ svg / img å›¾æ ‡ éƒ¨åˆ†é…ç½®

#### è‡ªå®šä¹‰æŒ‰é’®ä½¿ç”¨è‡ªå®šä¹‰å›¾æ ‡çš„ä¾‹å­
``` javascript
/**
 * å®šä¹‰ä¸€ä¸ªç©ºå£³ï¼Œç”¨äºè‡ªè¡Œè§„åˆ’cherryå·²æœ‰å·¥å…·æ çš„å±‚çº§ç»“æ„
 */
var customMenu = Cherry.createMenuHook('å®éªŒå®¤',  {
  icon: {
    type: 'svg',
    content: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10" /><path d="M8 14s1.5 2 4 2 4-2 4-2" /><line x1="9" y1="9" x2="9.01" y2="9" /><line x1="15" y1="9" x2="15.01" y2="9" /></svg>',
    iconStyle: 'width: 15px; height: 15px; vertical-align: middle;',
  },
});
...
...
new Cherry({toolbars: {
    toolbar: [
      customMenuName: ['ruby', 'audio', 'video'],
    ],
    customMenu: {
      customMenuName: customMenu,
    },
  }});
```
æ•ˆæœå¦‚ä¸‹ï¼š
![image](https://github.com/user-attachments/assets/ec5e10fe-a6ce-4847-b3bd-bd89d0f5e191)
