## 初识cherry markdown 编辑器
cherry markdown是一款**前端**-**markdown**-**编辑器**-**组件**：
- 前端：本项目只有前端工程，没有提供后台服务代码
- markdown：写markdown的
- 编辑器：由**工具栏**、**编辑区**、**预览区**、**解析引擎**四部分组成
- 组件：提供自定义工具栏、自定义语法以及[各种api](https://tencent.github.io/cherry-markdown/examples/api.html)

------

## hello world
要实现一个最简单例子只需要**三步**：
- 引入cherry的css和js
- 定义编辑器要出现的区域（出现在哪个位置、宽度多少、高度多少等）
- 实例化cherry

以下是一个简单的例子：
``` javascript
// 引入cherry的样式文件，样式文件包含编辑器样式、预览区样式，用户也可以自行覆盖
<link href="/dist/cherry-markdown.css" /> 
// 定义一个div，将cherry实例化到该div里
<div id="markdown-container" style="width:500px;height:600px"></div> 
// 引入cherry的js文件
<script src="/dist/cherry-markdown.min.js"></script> 
<script>
    new Cherry({
        id: 'markdown-container', 
        value: '## hello world', 
    });
</script>
```
可以[点击这里](https://tencent.github.io/cherry-markdown/examples/basic.html)查看hello world的在线demo

------

## 配置图片/文件上传接口
用户点击**上传图片**、**上传word**、**上传pdf**等【工具栏】，或者把文件**拖拽**到编辑区进行上传，或者在外部ctrl+C复制图片在cherry 编辑区 ctrl+V**粘贴**图片，都会调用用户定义的上传文件接口进行文件上传操作（如果没有配置该接口，上传图片会以base64格式展示）

**第一步**需要定义一个上传接口，demo如下：
```javascript
/**
 * 上传文件函数
 * @param file 上传文件的文件对象
 * @param callback 回调函数，回调函数接收两个参数，第一个参数为文件上传后的url，第二个参数可选，为额外配置信息
 */
function myFileUpload(file, callback) {
    // 先把文件上传到服务端，上传文件的具体代码需要自行实现
    putFile(file, function(err, url) {
        if (err) {
            // 上传失败
        } else {
            callback(url);
        }
    });
}
```
**第二步**，将上传文件的函数配置到cherry上，demo如下：
```
new Cherry({
    id: 'markdown-container', 
    value: '## hello world', 
    fileUpload: myFileUpload,
});
```
**当然**，我们还可以有更精细化的控制，比如我们希望上传的视频可以有**封面**、上传的图片自动带上width=60%的**样式**，demo如下：
```javascript
/**
 * 上传文件函数
 * @param file 上传文件的文件对象
 * @param callback 回调函数，回调函数接收两个参数，第一个参数为文件上传后的url，第二个参数可选，为额外配置信息
 */
function myFileUpload(file, callback) {
    // 先把文件上传到服务端，上传文件的具体代码需要自行实现
    putFile(file, function(err, url) {
        if (err) {
            // 上传失败
        } else {
            // 如果上传的是视频
            if (/video/i.test(file.type)) {
                callback(url, {
                name: '视频',
                poster: `${url}?poster=true`, // 视频的封面图片url
                isBorder: true, // 是否显示边框，默认false
                isShadow: true, // 是否显示阴影，默认false
                isRadius: true, // 是否显示圆角，默认false
                });
            } else if (/image/i.test(file.type)) {
                // 如果上传的是图片
                callback(url, {
                    name: '图片',
                    isBorder: true, // 是否显示边框，默认false
                    isShadow: true, // 是否显示阴影，默认false
                    isRadius: true, // 是否显示圆角，默认false
                    width: '60%', // 图片的宽度，默认100%，可配置百分比，也可配置像素值
                    height: 'auto', // 图片的高度，默认auto
                });
            } else {
                // 如果上传的是文件
                callback(url);
            }
        }
    });
}
```
anyway，目前我们已完成了cherry的主要配置，现在用户可以在你的服务上书写Markdown，并且上传图片了。

-----


## 调整工具栏
cherry有**五种**工具栏位置，如下：
![cherry工具栏](https://github.com/Tencent/cherry-markdown/assets/998441/fecbc23c-5e85-4072-9dc5-8c71faa9d700)
同时，cherry还默认提供了30+工具栏按钮（都定义在`/src/toolbars/hooks/`目录下），并且还支持自定义工具栏按钮。

**最简单的配置如下：**
```javascript
new Cherry({
    id: 'markdown-container', 
    value: '## hello world', 
    fileUpload: myFileUpload,
    toolbars: {
        // 定义顶部工具栏
        toolbar: ['bold','italic','strikethrough','|','color','header','ruby','|','list','panel','detail'],
        // 定义侧边栏，默认为空
        sidebar: [],
        // 定义顶部右侧工具栏，默认为空
        toolbarRight: [],
        // 定义选中文字时弹出的“悬浮工具栏”，默认为 ['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'quote', '|', 'size', 'color']
        bubble: false,
        // 定义光标出现在行首位置时出现的“提示工具栏”，默认为 ['h1', 'h2', 'h3', '|', 'checklist', 'quote', 'table', 'code']
        float: false,
    },
});
```
**配置的效果如下图：**
![image](https://github.com/Tencent/cherry-markdown/assets/998441/112949b0-19ba-4b0c-925f-56daa2e7b5b2)


**cherry自带的工具栏按钮有以下这些：**
- 辅助类
    - |: 分隔符，单纯的分割工具栏，无任何作用
    - insert: 插入，单纯的占位，点击没有任何效果，用来配置二级菜单
- 字体样式类
    - bold: 加粗
    - italic: 斜体
    - underline: 下划线
    - strikethrough: 删除线
    - sub: 下标
    - sup: 上标
    - ruby: 实现类似给文字加拼音的效果（当然如何把文字转成拼音需要业务方自行实现，也可参考[在线demo](https://tencent.github.io/cherry-markdown/examples/index.html)用的文字转拼音组件）
    - size: 文字尺寸，自带二级菜单，二级菜单里可选 小、中、大、特大
    - color: 文字颜色，自带二级菜单，二级菜单里可选 文字颜色、文字背景色
- 段落属性类
    - quote: 引用
    - detail: 手风琴，即可以展开收起内容
    - h1: 一级标题
    - h2: 二级标题
    - h3: 三级标题
    - header: 标题菜单，自带二级菜单，二级菜单里可以选 1~5级标题
    - ul: 无序列表
    - ol: 有序列表
    - checklist: 任务清单
    - list: 列表菜单，自带二级菜单，二级菜单里可选 有序列表、无序列表、任务清单
    - justify: 对齐方式，自带二级菜单，二级菜单里可以选 左对齐、居中、右对齐
    - panel: 信息面板，自带二级菜单，二级菜单里可以选 tips、info、warning、danger、success
- 插入类
    - image: 插入图片
    - audio: 插入音频
    - video: 插入视频
    - pdf: 插入pdf
    - word: 插入word文档
    - file: 插入普通文件
    - link: 插入链接
    - hr: 插入水平分割线
    - br: 插入新行
    - code: 代码块
    - formula: 插入数学公式
    - toc: 插入目录
    - table: 插入表格
    - drawIo: 插入draw.io画图，点击后会出现draw.io画图面板
    - graph: 插入画图，自带二级菜单，二级菜单里可选 流程图、时序图、状态图、类图、饼图、甘特图
- 功能类
    - undo: 回撤操作
    - redo: 恢复最近回撤的操作
    - theme: 切换主题，自带二级菜单，主题可配置也可由业务方自行丰富
    - codeTheme: 切换代码块的主题，自带二级菜单
    - mobilePreview: 把预览区域变成h5模式
    - togglePreview: 打开/关闭预览区(用于左右分栏模式，即左边是编辑区域，右边是预览区域)
    - switchModel: 切换编辑/预览模式(用于单栏编辑模式，即点一下是编辑模式，再点一下是预览模式，类似github的交互体验)
    - copy: 复制预览区域的html内容到剪贴板
    - export: 导出，自带二级菜单，二级菜单里可选 导出PDF、导出长图、导出markdown、导出html
    - fullScreen: 全屏/取消全屏
    - settings: 设置，自带二级菜单，二级菜单里可选 常规换行/经典换行切换、关闭/打开预览、隐藏工具栏 （不推荐用了，完全可以自行实现）

**如何组装工具栏**

比如我们为了节约空间，希望把所有插入类的按钮都放进一个按钮里，把所有文字类的按钮都放进另一个按钮里，这个要求是可以实现的，但需要注意，自带二级菜单的按钮**无法**被放进其他按钮里

同时我们也可以把字段样式类按钮放进“**悬浮工具栏**”中，把段落类和插入类按钮放进“**提示工具栏**”中，把功能类按钮放进**侧边栏**或*顶部右侧工具栏*中

代码如下：
```javascript
new Cherry({
    id: 'markdown-container', 
    value: '## hello world', 
    fileUpload: myFileUpload,
    toolbars: {
        // 定义顶部工具栏
        toolbar: [
            'undo', 'redo', '|',
            {bold:['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'ruby']},
            'color', 'size', '|', 'header', 'list', 'panel', '|',
            {insert: ['image', 'audio', 'video', 'link', 'hr', 'br', 'code', 'formula', 'toc', 'table', 'drawIo']},
            'graph'
        ],
        // 定义侧边栏，默认为空
        sidebar: ['theme', 'mobilePreview', 'copy'],
        // 定义顶部右侧工具栏，默认为空
        toolbarRight: ['fullScreen', 'export'],
        // 定义选中文字时弹出的“悬浮工具栏”，默认为 ['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'quote', '|', 'size', 'color']
        bubble: ['bold', 'italic', 'underline', 'strikethrough', 'sub', 'sup', 'ruby', '|', 'color','size',],
        // 定义光标出现在行首位置时出现的“提示工具栏”，默认为 ['h1', 'h2', 'h3', '|', 'checklist', 'quote', 'table', 'code']
        float: ['table', 'code', 'graph'],
    },
});
```

**配置的效果如下图：**
![字体样式](https://github.com/Tencent/cherry-markdown/assets/998441/dba68648-c2c2-41c1-ba42-e5d52a6db3d3)

**如何自定义工具栏按钮**
未完待续...

